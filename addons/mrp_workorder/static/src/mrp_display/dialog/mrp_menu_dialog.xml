<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mrp_workorder.MrpDisplayMenuDialog">
        <Dialog size="'md'" title="props.title" modalRef="modalRef" footer="false" withBodyPadding="false" bodyClass="'overflow-x-hidden'">
            <div t-if="state.menu === 'main'" class="o_mrp_menu_dialog p-3">
                <div class="row px-2">
                    <!-- Invisible checkbox to avoid focus on the first button when entering the modals -->
                    <input type="checkbox" hidden="hidden"/>
                    <div class="col-6 p-1">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                name="register_production"
                                t-on-click="() => this.props.registerProduction() &amp;&amp; this.props.close()">
                            <i class="fa fa-plus"/> Register Production / Serial
                        </button>
                    </div>
                    <div class="col-6 p-1">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                name="action_scrap"
                                t-on-click="() => this.callAction('button_scrap')">
                            <i class="fa fa-random"/> Scrap
                        </button>
                    </div>
                    <div class="col-6 p-1" t-if="props.record.resModel === 'mrp.workorder'">
                        <button
                                t-on-click="displayModifyRoutingMenu"
                                class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3">
                            <i class="fa fa-mail-forward"/>Modify Routing
                        </button>
                    </div>
                    <div class="col-6 p-1" t-if="props.record.resModel === 'mrp.production'">
                        <button
                                class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                t-on-click="() => this.callAction('action_add_workorder')">
                            <i class="fa fa-plus"/>Add Work Order
                        </button>
                    </div>
                    <div class="col-6 p-1">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                t-on-click="() => this.callAddComponentAction()"
                                name="addComponent">
                            <i class="fa fa-plus"/>Add Component
                        </button>
                    </div>
                    <div class="col-6 p-1" t-if="props.groups.byproducts">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                t-on-click="() => this.callAddByProductAction()"
                                name="addByProduct">
                            <i class="fa fa-plus"/>Add By-product
                        </button>
                    </div>
                    <div class="col-6 p-1">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                            t-on-click="openMO" name="openMO">
                            <i class="fa fa-external-link"/>Open Manufacturing Order
                        </button>
                    </div>
                    <div class="col-6 p-1" t-if="props.record.resModel === 'mrp.workorder'">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                            t-on-click="displayInstructionsMenu" name="displayInstructionsMenu">
                            <i class="fa fa-edit"/>Update Instructions
                        </button>
                    </div>
                    <div class="col-6 p-1" t-if="props.record.resModel !== 'mrp.workorder'">
                        <button class="d-flex flex-column gap-1 btn btn-secondary fs-3 w-100 h-100 py-3"
                                t-on-click="() => this.callAction('action_log_note')">
                            <i class="fa fa-sticky-note-o"/>Log Note
                        </button>
                    </div>
                    <div class="col-12 p-1" name="block" t-if="props.record.resModel === 'mrp.workorder'">
                        <button t-if="props.record.data.working_state !== 'blocked'"
                                class="d-flex flex-column gap-1 btn btn-danger fs-3 w-100 h-100 py-3"
                                t-on-click="block" name="block">
                            Block
                        </button>
                        <button t-if="props.record.data.working_state === 'blocked'"
                                class="d-flex flex-column gap-1 btn btn-success fs-3 w-100 h-100 py-3"
                                t-on-click="unblock" name="unblock">
                            Unblock
                        </button>
                    </div>
                </div>
            </div>
            <div t-if="state.menu === 'instructions'"
                 class="d-flex flex-column gap-1 p-3">
                <button class="btn btn-light p-3 fs-3 text-start" t-on-click="displayMainMenu">
                    <i class="oi oi-chevron-left me-2"/> Back
                </button>
                <div class="btn-group-vertical">
                    <button class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="() => this.callAction('action_log_note')">
                        Log Note <i class="oi oi-chevron-right"/>
                    </button>
                    <button class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="displayImprovementMenu" name="displayImprovementMenu">
                        Improvement Suggestion <i class="oi oi-chevron-right"/>
                    </button>
                </div>
            </div>
            <div t-if="state.menu === 'improvement'"
                class="o_mrp_menu_update_instruction d-flex flex-column gap-1 p-3">
                <button class="btn btn-light p-3 fs-3 text-start"
                        t-on-click="displayInstructionsMenu">
                    <i class="oi oi-chevron-left me-2"/> Back
                </button>
                <div class="btn-group-vertical">
                    <button t-if="props.params.checks.length"
                            class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="updateStep">
                        Update Instructions <i class="oi oi-chevron-right"/>
                    </button>
                    <button t-if="props.params.checks.length"
                            class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="removeStep">
                        Delete a Step <i class="oi oi-chevron-right"/>
                    </button>
                    <button class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="addStep">
                        Add a Step <i class="oi oi-chevron-right"/>
                    </button>
                    <button t-if="props.params.checks.length"
                            class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="setPicture">
                        Set a New picture <i class="oi oi-chevron-right"/>
                    </button>
                </div>
            </div>
            <div t-if="state.menu === 'routing'"
                 class="d-flex flex-column gap-1 p-3">
                <button class="btn btn-light p-3 fs-3 text-start" t-on-click="displayMainMenu">
                    <i class="oi oi-chevron-left me-2"/> Back
                </button>
                <div class="btn-group-vertical">
                    <button class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                            t-on-click="moveToWorkcenter" name="moveToWorkCenter">
                        Move to work center <i class="oi oi-chevron-right"/>
                    </button>
                    <button class="btn btn-outline-secondary d-flex justify-content-between align-items-center p-3 fs-3"
                             t-on-click="() => this.callAction('action_add_workorder')">
                        Add Work Order <i class="oi oi-chevron-right"/>
                    </button>
                </div>
            </div>
        </Dialog>
    </t>
</templates>
