<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="l10n_au_previous_payroll_transfer_form" model="ir.ui.view">
        <field name="name">l10n_au.previous.payroll.transfer.form</field>
        <field name="model">l10n_au.previous.payroll.transfer</field>
        <field name="arch" type="xml">
            <form string="Set YTD Initial Balances">
                <div class="alert alert-warning mb-0" role="alert">
                    In case an employee switched income stream type during this financial year
                    (e.g. "working holiday maker" to "salary &amp; wages"), make sure to create
                    an extra line for that employee with the additional income stream type.
                </div>
                <sheet>
                    <div class="alert alert-info mb-2" role="alert">
                        <p>
                            <h3>Important Information</h3>
                            If you are transitioning from another payroll software to Odoo, you have likely accumulated
                            and reported YTD values for each of your existing employees across the current financial year.
                            To set up your payroll properly in Odoo, you have three options:
                            <ol>
                                <li>
                                    Finalise your YTD values in your previous payroll software, then start generating payslips
                                    from scratch in Odoo. This is the easiest way to proceed, and you do not need to import any
                                    YTD balances in Odoo. Your employee will have two separate income statements on their ATO
                                    portal at the EOFY.
                                </li>
                                <li>
                                    Finalise your YTD values in your previous payroll software, then import your YTD balances in
                                    Odoo before generating new payslips. This will ensure continuity on your employees' payslips,
                                    but requires you to input both your previous software's BMS ID and employee's payroll IDs so
                                    that the ATO can ensure continuity on their income statements.

                                </li>
                                <li>
                                    Zero out your YTD values in your previous payroll software, then import your YTD balances in Odoo.
                                    This step does not require you to input your previous software's BMS ID and payroll IDs.
                                </li>
                            </ol>
                            If you go down the route of option 2 or 3, Odoo will create an update even in the menu <b>Payroll &gt; Reporting &gt;
                            Single Touch Payroll</b> which you will need to submit before submitting your first payslips for these employees.<br/><br/>
                            In case your employees haven't been created in Odoo yet, you can always close this window and import their opening
                            balances later on via the menu <b>Payroll &gt; Configuration &gt; YTD Opening Balances</b>, as long as no payslips for these
                            employees have been created.
                        </p>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="company_id" placeholder="Company" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="previous_bms_id"/>
                            <field name="fiscal_year_start_date"/>
                        </group>
                    </group>
                    <group>
                        <field name="l10n_au_previous_payroll_transfer_employee_ids" widget="one2many_list" nolabel="1">
                            <list editable="bottom">
                                <field name="company_id" column_invisible="1"/>
                                <field name="employee_id" domain="[('company_id', '=', company_id)]" options="{'no_create': True}"/>
                                <field name="previous_payroll_id" readonly="0" />
                                <field name="l10n_au_income_stream_type" />
                            </list>
                        </field>
                    </group>
                </sheet>
                <footer>
                    <button name="action_transfer" string="Transfer and Generate YTD" type="object" class="btn-primary" />
                    <button string="Cancel" class="btn-secondary" special="cancel" />
                </footer>
            </form>
        </field>
    </record>

</odoo>
