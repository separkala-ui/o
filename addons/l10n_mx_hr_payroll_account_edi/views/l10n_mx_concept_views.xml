<?xml version="1.0"?>
<odoo>
    <record id="view_l10n_mx_concept_list" model="ir.ui.view">
        <field name="name">l10n.mx.concept.list</field>
        <field name="model">l10n.mx.concept</field>
        <field name="arch" type="xml">
            <list string="Concepts" expand="1">
                <field name="cfdi_type" optional="hide"/>
                <field name="sat_code"/>
                <field name="payroll_code"/>
                <field name="name"/>
                <field name="is_taxable" invisible="cfdi_type != 'perception'"/>
            </list>
        </field>
    </record>

    <record id="view_l10n_mx_concept_form" model="ir.ui.view">
        <field name="name">l10n.mx.concept.form</field>
        <field name="model">l10n.mx.concept</field>
        <field name="arch" type="xml">
            <form string="Concept">
                <sheet>
                    <div class="oe_title mw-100">
                        <h1><field name="name" nolabel="1"/></h1>
                    </div>
                    <group>
                        <field name="cfdi_type"/>
                        <field name="is_taxable" invisible="cfdi_type != 'perception'"/>
                        <field name="sat_code"/>
                        <field name="payroll_code"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_l10n_mx_concept_filter" model="ir.ui.view">
        <field name="name">l10n.mx.concept.select</field>
        <field name="model">l10n.mx.concept</field>
        <field name="arch" type="xml">
            <search string="Search Concepts">
                <field name="sat_code"/>
                <field name="payroll_code"/>
                <field name="name"/>
                <filter string="Taxable" name="taxable"
                        domain="[('cfdi_type', '=', 'perception'), ('is_taxable', '=', True)]"/>
                <filter string="Not Taxable" name="not_taxable"
                        domain="[('cfdi_type', '=', 'perception'), ('is_taxable', '=', False)]"/>
                <filter string="Type" name="group_by_type" context="{'group_by': 'cfdi_type'}"/>
            </search>
        </field>
    </record>

    <record id="l10n_mx_action_concept" model="ir.actions.act_window">
        <field name="name">Concepts</field>
        <field name="res_model">l10n.mx.concept</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="view_l10n_mx_concept_filter"/>
        <field name="context">{"search_default_group_by_type":1}</field>
    </record>

    <menuitem
        id="menu_l10n_mx_hr_payroll_configuration"
        name="Mexico"
        parent="hr_work_entry_enterprise.menu_hr_payroll_configuration"
        sequence="500"
        groups="hr_payroll.group_hr_payroll_user"/>

    <menuitem
        id="menu_l10n_mx_concept"
        name="Concepts"
        parent="menu_l10n_mx_hr_payroll_configuration"
        sequence="1"
        action="l10n_mx_action_concept"
        groups="hr_payroll.group_hr_payroll_user"/>
</odoo>
