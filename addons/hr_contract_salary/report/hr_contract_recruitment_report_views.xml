<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="contract_recruitment_report_view_search" model="ir.ui.view">
            <field name="name">contract.recruitment.report.view.search</field>
            <field name="model">hr.contract.recruitment.report</field>
            <field name="arch" type="xml">
                <search string="Offer Analysis">
                    <field name="job_id" />
                    <field name="offer_create_date" />
                    <filter
                        string="Last 365 Days Offers"
                        name="year"
                        domain="[
                            ('offer_create_date', '>=', 'today -365d'),
                            ('offer_create_date', '&lt;', 'today +1d')
                            ]"
                    />
                    <separator />
                    <group>
                        <filter string="Offer" name="group_by_offer_id" domain="[]"
                            context="{'group_by': 'offer_id'}" />
                        <filter string="Applicant" name="group_by_applicant_id" domain="[]"
                            context="{'group_by': 'applicant_id'}" />
                        <filter string="Job" name="group_by_job_id" domain="[]"
                            context="{'group_by': 'job_id'}" />
                        <filter string="Offer State" name="group_by_offer_state" domain="[]"
                            context="{'group_by': 'offer_state'}" />
                        <filter string="Offer Create Date" name="group_by_offer_create_date" domain="[]"
                        context="{'group_by': 'offer_create_date'}" />

                        <filter string="In Progress" name="group_by_in_progress" domain="[]"
                            context="{'group_by': 'in_progress'}" invisible="1" />
                        <filter string="Fully Signed" name='group_by_fully_signed' domain="[]"
                            context="{'group_by': 'fully_signed'}" invisible="1" />
                        <filter string="Partially Signed" name="group_by_partially_signed" domain="[]"
                            context="{'group_by': 'partially_signed'}" invisible="1" />
                        <filter string="Refused" name="group_by_refused" domain="[]"
                            context="{'group_by': 'refused'}" invisible="1" />
                        <filter string="Expired" name="group_by_expired" domain="[]"
                            context="{'group_by': 'expired'}" invisible="1"/>
                        <filter string="Cancelled" name="group_by_cancelled" domain="[]"
                            context="{'group_by': 'cancelled'}" invisible="1"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="contract_recruitment_report_view_graph" model="ir.ui.view">
            <field name="name">contract.recruitment.report.view.graph</field>
            <field name="model">hr.contract.recruitment.report</field>
            <field name="arch" type="xml">
                <graph string="Offer Analysis" type="bar" sample="1">
                    <field name="job_id" />
                    <field name="offer_state" />
                </graph>
            </field>
        </record>

        <record id="contract_recruitment_report_view_pivot" model="ir.ui.view">
            <field name="name">contract.recruitment.report.view.pivot</field>
            <field name="model">hr.contract.recruitment.report</field>
            <field name="arch" type="xml">
                <pivot string="Offer Analysis" sample="1">
                    <field name="job_id" type="col" />
                    <field name="offer_state" type="row" />
                </pivot>
            </field>
        </record>

        <record id="contract_recruitment_report_view_list" model="ir.ui.view">
            <field name="name">contract.recruitment.report.view.list</field>
            <field name="model">hr.contract.recruitment.report</field>
            <field name="arch" type="xml">
                <list
                    string="Offer Analysis"
                    action="action_open_applicant"
                    type="object"
                >
                    <field name="applicant_id" optional="show" />
                    <field name="offer_id" optional="show" />
                    <field name="job_id" optional="show" />
                    <field name="offer_state" optional="show" />
                    <field name="offer_create_date" optional="show" />
                </list>
            </field>
        </record>

        <record id="contract_recruitment_report_action" model="ir.actions.act_window">
            <field name="name">Offer Analysis</field>
            <field name="res_model">hr.contract.recruitment.report</field>
            <field name="view_mode">graph,pivot</field>
            <field name="search_view_id" ref="contract_recruitment_report_view_search" />
            <field name="context">{
                'search_default_year': True,
                }</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_empty_folder">
                    No data to display
                </p>
            </field>
        </record>

        <menuitem id="menu_report_contract_recruitment_all"
            name="Offer Analysis"
            action="contract_recruitment_report_action"
            groups="hr.group_hr_manager"
            parent="hr_recruitment.report_hr_recruitment"
        />
    </data>
</odoo>
