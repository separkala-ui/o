<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="documents_operation_view_form" model="ir.ui.view">
        <field name="name">documents.operation.view.form</field>
        <field name="model">documents.operation</field>
        <field name="arch" type="xml">
            <form class="o_documents_operation">
                <field name="display_name" invisible="1" force_save="1"/>
                <field name="user_permission" invisible="1" force_save="1"/>
                <field name="access_internal" invisible="1" force_save="1"/>
                <field name="access_via_link" invisible="1" force_save="1"/>
                <field name="is_access_via_link_hidden" invisible="1" force_save="1"/>
                <field name="operation" readonly="1" invisible="1"/>
                <field name="attachment_id" invisible="1" force_save="1"/>
                <sheet>
                    <h1 class="fs-3 ps-3">Choose a destination</h1>
                    <div class="row cursor-pointer h-100">
                        <div class="d-flex flex-column col-md-4" style="border-right: 1px solid lightgrey;">
                            <!-- force loading access rights fields -->
                            <field name="document_ids" widget="documents_with_access_2many" invisible="true"/>
                            <field
                                name="destination" required="1" class="d-flex flex-column" nolabel="1"
                                widget="documents_user_folder_id_char"
                                options="{
                                    'extraUpdateFields': [
                                        'display_name', 'user_permission', 'access_internal', 'access_via_link',
                                        'is_access_via_link_hidden'
                                    ],
                                    'ulClass': 'o_documents_operation_search_panel',
                                }"
                            />
                        </div>
                        <div class="col-md-8">
                            <h2 class="d-md-none fs-4 ps-3">Documents currently in destination</h2>
                            <field
                                name="destination_children_ids" readonly="1" nolabel="1"
                                class="cursor-default o_documents_operation_destination_children_ids"
                                widget="documents_x2many_no_open" options="{'no_open': True}"
                            >
                                <list limit="10">
                                    <field name="mimetype" widget="documents_type_icon" nolabel="1"/>
                                    <field name="type" column_invisible="1"/>
                                    <field name="name"/>
                                    <field name="partner_id"/>
                                    <field name="owner_id"/>
                                </list>
                            </field>
                        </div>
                    </div>
                </sheet>
                <footer>
                    <widget name="documents_operation_confirmation"/>
                    <widget name="documents_operation_new_folder"/>
                    <button string="Discard" special="cancel" class="btn-secondary"/>
                </footer>
            </form>
        </field>
    </record>
</odoo>
